# [데이터 타입]

자바스크립트의 데이터 타입에는 크게 두 가지가 있다.

> 일반적으로 기본형은 할당이나 연산시 복제되고 참조형은 참조된다고 알려져 있다. 엄밀히 말하면 둘 모두 복제를 하긴 하지만, 기본형은 값이 담긴 주솟값을 바로 복제하는 반면 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복제한다는 점이 다르다.

- Primitive type (원시형)

  - Number (숫자)
  - String (문자)
  - Boolean (불리언)
  - null
  - undefined

- Object type (참조형)
  - Object (객체)
  - Array (배열)
  - Function (함수)
  - RegExp (정규표현식)

컴퓨터는 모든 데이터를 0 또는 1로 바꿔 기억한다는 사실은 익히 알고들 있을 것이다. 그래서 0과 1을 표현할 수 있는 하나의 메모리 조각을 비트라 부르고, 각 비트마다 고유한 식별자를 통해 위치를 확인할 수 있다.

---

### 식별자와 변수

> 보통 변수와 식별자를 혼용하느 경우가 많다. 식별자라고 해야 할 곳에 변수를 변수라고 해야할 곳에 식별자를 쓰는 식으로 말이다. 혼용이 가능한 이유는 대부분의 경우에 문맥에 따라 무엇을 말하고자 하는지를 유추할 수 있기 때문이지만 둘의 차이를 모른다면 혼란스러울 수 있다.

변수는 '변할 수 있는 수'이다. 수학 용어를 차용했기 때문에 숫자를 의마하는 '수'가 붙었을 뿐, 값이 반드시 '숫자'여야 하는 것은 아니다. 식별자는 어떤 데이터를 식별하는 데 이름, 즉 변수명이다.

> 영어 단어 variable은 원래 '변할 수 있다'라는 형용사이지만 컴퓨터 용어로 쓸 때는 '변할 수 있는 무언가'라는 명사로 확장시켰고 여기서 말하는 '무언가'란 데이터를 말한다.

---

### 변수 선언

변수를 선언만하고 데이터를 할당하지 않으면 공간만 할당된다. 그래서 이 선언문을 출력하면 undefined 값이 나온다. 빈 공간이라 생각하면 된다.

```javascript
var a;
```

| 주소 |     데이터      |
| ---- | :-------------: |
| ...  |                 |
| 1002 |                 |
| 1003 | 이름: a <br>값: |
| 1004 |                 |
| 1005 |                 |
| ...  |                 |

위에 표를 보면 결국 변경 가능한 데이터가 담길 수 있는 공간또는 그릇이라고 생각할 수 있겠다.

---

### 데이터 할당

<변수 선언과 할당>

```javascript
var a; // 변수 a 선언
a = "abc"; // 변수 a에 데이터 할당

var a = "abc"; // 변수 선언과 할당을 한 문장으로 표현
```

선언과 할당을 위에 코드처럼 두 문장으로 나누어 명령하든 한 문장으로 명령하든, 자바스크립트 엔진은 결국 같은 동작을 수행한다. 먼저 메모리에서 비어 있는 공간을 확보하고 별도의 데이터 영역에 메모리 공간을 다시 확보해 문자열 'abc'를 저장하고 그 주소를 변수 영역에 저장하는 식으로 이뤄진다.

<데이터 할당에 대한 메모리 영역의 변화>
| 주소 (변수 영역) | 데이터 | 주소 (데이터영역) | 데이터 |
| ------- | :------- | --------| -------- |
| ... | | ... ||
| 1002 | | 5002 ||
| 1003 | 이름: a <br>값: @5004 | 5003 ||
| 1004 | | 5004 | 'abc' |
| 1005 | | 5005 ||
| ... | | ... ||

1. 변수 영역에서 빈 공간(@1003)을 확보한다.
2. 확보한 공간의 식별자를 a로 지정한다.
3. 데이터 영역의 빈 공간(@5004)에 문자열 'abc'를 저장한다.
4. 변수 영역에서 a라는 식별자를 검색한다(@1003).
5. 앞서 저장한 문자열의 주소(@5004)를 @1003의 공간에 대입한다.

> 왜? 변수 영역에 값을 직접 대입하지 않고 굳이 번거롭게 한 단계를 더 거치는 것일까? 데이터 변환을 자유롭게 할 수 있게 함과 동시에 메모리를 더욱 효울적으로 관리하기 위함이다.

> 만약 미리 확보한 공간 내애서만 데이터 변환을 할 수 있다면 변환한 데이터를 다시 저장하기 위해서는 '확보된 공간을 변환된 데이터 크기에 맞게 늘리는 작업'이 선행해야 한다. 이 데이터 주소가 중간에 있을 경우 해당 주소의 크기를 늘리고 줄인다면 그만큼 변화가 생길 것이고 변화된 만큼 식별자에 다시 연결해야하는 번거로운 작업이 실행 될것이다.

<문자열 변환에 대한 메모리 영역의 변화>
| 주소 (변수 영역) | 데이터 | 주소 (데이터영역) | 데이터 |
| ------- | :------- | --------| -------- |
| ... | | ... ||
| 1002 | | 5002 ||
| 1003 | 이름: a <br> 값: @5005 | 5003 ||
| 1004 | | 5004 | 'abc' |
| 1005 | | 5005 | 'abcdef' |
| ... | | ... ||

문자열 'abc'의 마지막에 'def'를 추가하라고 하면 컴퓨터는 앞서 'abc'가 저장된 공간에 'abcdef'를 할당하는 대신 새로 별도의 공간에 저장하고 그 주소를 변수 공간에 연결한다.

> 이처럼 변수 영역과 데이터 영역을 분리하면 중복된 데이터에 대한 처리 효율이 높아진다.

---

### 불변값

변수(variable)와 상수(constant)를 구분하는 성질은 '변경 가능성'이다.

> 불변값과 상수를 같은 개념으로 오해하기 쉬운데, 이를 구분할 필요가 있다. 변수와 상수를 구분 짓는 변경 가능성의 대상은 변수 영역 메모리이다. 한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당할 수 있는지 여부가 관건이다. 반면 불변성 여부를 구분할 때의 변경 가능성의 대상은 데이터 메모리이다.

<불변성>

```javascript
var a = "abc";
a = a + "def"; // 기존 주소에 'def'값을 추가하는 게 아니라 새로운 문자열을 새로운 공간에 저장하고 그 주소를 변수 a에 연결한다.

var b = 5;
var c = 5; // b 변수에 할당 되었던 5의 값을 재할당하여 변수 c에 연결한다.
b = 7;
```

> 문자열 값도 한 번 만든 값을 바꿀 수 없고, 숫자 값도 다른 값으로 변경할 수 없다. 변경은 새로 만드는 동작을 통해서만 이루어지고 이것이 바로 불변값의 성질이다.

> 한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 한 영원히 변하지 않는다.

### 가변값

<참조형 데이터의 할당>

```javascript
var obj1 = {
  a: 1,
  b: "bbb",
};
```

| 주소 (변수 영역) | 데이터 (변수 영역)     | 주소 (데이터 영역) | 데이터(데이터 영역) |
| ---------------- | :--------------------- | ------------------ | ------------------- |
| ...              |                        | 5001               | @7183 ~ ?           |
| 1002             | 이름: a <br> 값: @5001 | 5002               |                     |
| 1003             |                        | 5003               | 1                   |
| 1004             |                        | 5004               | 'bbb'               |
| 1005             |                        | 5005               |                     |
| ...              |                        | ...                |                     |

| 주소(객체 @5001의 변수영역) | 데이터(객체 @5001의 변수영역) |
| --------------------------- | :---------------------------- |
| 7103                        | 이름: a <br>값: @5003         |
| 7104                        | 이름: a <br>값: @5004         |
| 7105                        |                               |
| 7106                        |                               |
| ...                         |                               |

1. 컴퓨터는 우선 변수 영역의 빈 공간(@1002)을 확보하고, 그 주소의 이름을 obj1로 지정한다.
2. 임의의 데이터 저장 공간(@5001)에 데이터를 저장하려고 보니 여러 개의 프로퍼티로 이뤄진 데이터 그룹이다. 이 그룹 내부의 프로퍼티들을 저장하기 위해 별도의 변수 영역을 마련하고, 그 영역의 주소 (@7103 ~ ?) @5001에 저장한다.
3. @7103 및 @7104에 각각 a와 b라는 프로퍼티 이름을 저장한다.
4. 데이터 영역에서 숫자 1을 검색한다. 검색 결과가 없으므로 임의로 @5003에 저장하고, 이 주소를 @7103에 저장한다. 문자열 'bbb' 역시 임의로 @5004에 저장하고, 이 주소를 @7104에 저장한다.

> 기본형 데이터와의 차이는 '객체의 변수(프로퍼티) 영역'이 별도로 존재한다는 점이다.

<참조형 데이터의 프로퍼티 재할당>

```javascript
var obj1 = {
  a: 1,
  b: "bbb",
};
obj.a = 2;
```

| 주소 (변수 영역) | 데이터 (변수 영역)     | 주소 (데이터 영역) | 데이터(데이터 영역) |
| ---------------- | :--------------------- | ------------------ | ------------------- |
| ...              |                        | 5001               | @7103 ~ ?           |
| 1002             |                        | 5002               |                     |
| 1003             | 이름: a <br> 값: @5001 | 5003               | 1                   |
| 1004             |                        | 5004               | 'bbb'               |
| 1005             |                        | 5005               | 2                   |
| ...              |                        | ...                |                     |

| 주소(객체 @5001의 변수영역) | 데이터(객체 @5001의 변수영역) |
| --------------------------- | :---------------------------- |
| 7103                        | 이름: a <br>값: @5005         |
| 7104                        | 이름: a <br>값: @5004         |
| 7105                        |                               |
| 7106                        |                               |
| ...                         |                               |

1. obj1의 a 프로퍼티에 숫자 2를 할당하려한다.
2. 데이터 영역에서 숫자 2를 검색한다.
3. 검색 결과가 없으므로 빈 공간인 @5005에 저장하고, 이 주소를 @7103에 저장한다.
   > 도표를 보면 알 수 있듯이 '새로운 객체'가 만들어진 것이 아니라 기존의 객체 내부의 값만 바뀐 것을 알 수 있다.

<중첩된 참조형 데이터(객체)의 프로퍼티 할당>

```javascript
var obj1 = {
  x: 3,
  arr: {3, 4, 5}
};
```

| 주소 (변수 영역) | 데이터 (변수 영역)     | 주소 (데이터 영역) | 데이터(데이터 영역) |
| ---------------- | :--------------------- | ------------------ | ------------------- |
| 1001             |                        | 5001               | @7103 ~ ?           |
| 1002             | 이름: obj<br>값: @5001 | 5002               | 3                   |
| 1003             |                        | 5003               | @8104 ~ ?           |
| 1004             |                        | 5004               | 4                   |
| 1005             |                        | 5005               | 5                   |
| ...              |                        | ...                |                     |

| 주소(객체 @5001의 변수영역) | 데이터(객체 @5001의 변수영역) | 주소(배열 @5003의 변수영역) | 데이터(배열 @5003의 변수영영) |
| --------------------------- | :---------------------------- | --------------------------- | ----------------------------- |
| 7103                        | 이름: a <br>값: @5005         | 8104                        | 이름:0<br> 값: @5002          |
| 7104                        | 이름: a <br>값: @5004         | 8105                        | 이름:1<br> 값: @5004          |
| ...                         |                               | 8106                        | 이름:2<br> 값: @5005          |
| ...                         |                               | ...                         |                               |
| ...                         |                               | ...                         |                               |

1. 컴퓨터는 우선 변수 영역의 빈 공간(@1002)을 확보하고 그 주소의 이름을 Obj로 지정한다.
2. 임의의 데이터 저장공간(@5001)에 데이터를 저장하려는데, 이 데이터는 여러 개의 변수와 값들을 모아놓은 그룹(객쳬)이다. 이 그룹의 각 변수(프로퍼티)들을 저장하기 위해 별도의 변수 영역을 마련하고(@7103 ~ ?), 그 영역의 주소를 @5001에 저장한다.
3. @7103에 이름 x를 @7104에 이름 arr를 지정한다.
4. 데이터 영역에서 숫자 3을 검색한다. 없으므로 임의로 @5002에 저장하고, 이 주소를 @7103에 저장한다.
5. @7104에 저장할 값은 배열로서 역시 데이터 그룹이다. 이 그룹 내부의 프로퍼티들을 저장하기 위해 별도의 변수 영역을 마련하고(@8104 ~?), 그 영역 주소 정보(@8104 ~?)를 @5003에 저장한 다음, @5003을 @7104에 저장한다.
6. 배열의 요소가 총 3개이므로 3개의 변수 공간을 확보하고 각각 인덱스를 부여한다.(0,1,2)
7. 데이터 영역에서 숫자 3을 검색해서(@5002) 그 주소를 @8104에 저장한다.
8. 데이터 영역에 숫자 4가 없으므로 @5004에 저장하고, 이 주소를 @8105에 저장한다.
9. 데이터 영역에 숫자 5가 없으므로 @5005에 저장하고, 이 주소를 @8106에 저장한다.
   > @1002 -> @5001 -> (@7103~?) -> @7104 -> @5003 -> (@8104~?) -> @8105 -> @5004 -> 4 반환
